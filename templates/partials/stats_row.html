<!-- File: src/cashpilot/templates/partials/stats_row.html -->
<div id="stats-row" class="space-y-4">
    <!-- Hero: Total Sales -->
    <div class="bg-gradient-to-br from-primary/10 to-base-100 rounded-lg border-2 border-primary shadow-lg p-6">
        <p class="text-xs text-primary/70 uppercase tracking-wider font-bold">
            ğŸ’ {{ _('TOTAL SALES') }}
        </p>
        <div class="mt-4 flex items-baseline gap-2">
            <p class="text-4xl font-black text-primary">
                Gs {{ total_sales | format_currency_py }}
            </p>
        </div>
        <p class="text-xs text-base-content/60 mt-3">ğŸ§® {{ _('Cash Sales') }} + {{ _('Cards') }} + {{ _('Bank Transfer') }}</p>
    </div>

    <!-- Primary Grid: POS Report Comparison (4-column) -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4">
        <!-- Ventas al Contado (Cash Sales) -->
        <div class="bg-gradient-to-br from-amber-500/10 to-base-100 rounded-lg border border-amber-200 shadow p-3 md:p-4">
            <p class="text-xs text-amber-700 uppercase tracking-wider font-semibold">
                ğŸ’µ {{ _('Cash Sales') }}
            </p>
            <p class="text-2xl sm:text-3xl font-bold mt-2 text-amber-900">
                Gs {{ cash_sales | format_currency_py }}
            </p>
            <p class="text-xs text-amber-600/70 mt-3">ğŸ“¦ {{ _('Register') }} + {{ _('Envelope') }}</p>
        </div>

        <!-- Ventas Con Tarjeta (Card Payments) -->
        <div class="bg-gradient-to-br from-sky-500/10 to-base-100 rounded-lg border border-sky-200 shadow p-3 md:p-4">
            <p class="text-xs text-sky-700 uppercase tracking-wider font-semibold">
                ğŸ’³ {{ _('Card Payments') }}
            </p>
            <p class="text-2xl sm:text-3xl font-bold mt-2 text-sky-900">
                Gs {{ card_payments_total | format_currency_py }}
            </p>
            <p class="text-xs text-sky-600/70 mt-3">ğŸ“± {{ _('Credit') }} + {{ _('Debit') }}</p>
        </div>

        <!-- Ventas a CrÃ©dito (Credit Sales) -->
        <div class="bg-gradient-to-br from-blue-500/10 to-base-100 rounded-lg border border-blue-200 shadow p-3 md:p-4">
            <p class="text-xs text-blue-700 uppercase tracking-wider font-semibold">
                ğŸ“ {{ _('Credit Sales') }}
            </p>
            <p class="text-2xl sm:text-3xl font-bold mt-2 text-blue-900">
                Gs {{ credit_sales_total | format_currency_py }}
            </p>
            <p class="text-xs text-blue-600/70 mt-3">ğŸ§¾ {{ _('Amount of money on credit') }}</p>
        </div>

        <!-- Cobranzas (Collections) -->
        <div class="bg-gradient-to-br from-green-500/10 to-base-100 rounded-lg border border-green-200 shadow p-3 md:p-4">
            <p class="text-xs text-green-700 uppercase tracking-wider font-semibold">
                âœ… {{ _('Collections') }}
            </p>
            <p class="text-2xl sm:text-3xl font-bold mt-2 text-green-900">
                Gs {{ credit_payments_collected | format_currency_py }}
            </p>
            <p class="text-xs text-green-600/70 mt-3">ğŸ’° {{ _('Payments collected') }}</p>
        </div>
    </div>

    <!-- More Details Toggle -->
    <div class="text-center">
        <button onclick="toggleMoreStats()" class="btn btn-sm btn-ghost gap-2">
            <span id="toggle-text">{{ _('More Details') }}</span>
            <svg id="toggle-icon" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor"
                 viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </button>
    </div>

    <!-- Collapsible: Additional Business Metrics -->
    <div id="more-stats" class="hidden">
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4">
            <!-- Bank Transfers -->
            <div class="bg-gradient-to-br from-amber-500/10 to-base-100 rounded-lg border border-amber-200 shadow p-3 md:p-4">
                <p class="text-xs text-amber-700 uppercase tracking-wider font-semibold">
                    ğŸ¦ {{ _('Bank Transfers') }}
                </p>
                <p class="text-2xl sm:text-3xl font-bold mt-2 text-amber-900">
                    Gs {{ bank_transfer_total | format_currency_py }}
                </p>
                <p class="text-xs text-amber-600/70 mt-3">ğŸ“± {{ _('Direct account transfers') }}</p>
            </div>

            <!-- Total Expenses -->
            <div class="bg-gradient-to-br from-red-500/10 to-base-100 rounded-lg border border-red-200 shadow p-3 md:p-4">
                <p class="text-xs text-red-700 uppercase tracking-wider font-semibold">
                    ğŸ“‰ {{ _('Total Expenses') }}
                </p>
                <p class="text-2xl sm:text-3xl font-bold mt-2 text-red-900">
                    âˆ’Gs {{ total_expenses | format_currency_py }}
                </p>
                <p class="text-xs text-red-600/70 mt-3">ğŸ’¸ {{ _('Cash outflows') }}</p>
            </div>

            <!-- Cash Profit -->
            <div class="{% if cash_profit >= 0 %}bg-gradient-to-br from-emerald-500/10 to-base-100 border-emerald-200{% else %}bg-gradient-to-br from-red-500/10 to-base-100 border-red-200{% endif %} rounded-lg border shadow p-3 md:p-4">
                <p class="text-xs {% if cash_profit >= 0 %}text-emerald-700{% else %}text-red-700{% endif %} uppercase tracking-wider font-semibold">
                    ğŸ’° {{ _('Cash Profit') }}
                </p>
                <p class="text-2xl sm:text-3xl font-bold mt-2 {% if cash_profit >= 0 %}text-emerald-900{% else %}text-red-900{% endif %}">
                    {% if cash_profit >= 0 %}+{% endif %}Gs {{ cash_profit|abs | format_currency_py }}
                </p>
                <p class="text-xs {% if cash_profit >= 0 %}text-emerald-600/70{% else %}text-red-600/70{% endif %} mt-3">
                    ğŸ’µ  {{ _('Cash Sales') }} âˆ’ {{ _('Expenses') }}
                </p>
            </div>

            <!-- Sessions Status -->
            <div class="bg-gradient-to-br from-info/5 to-base-100 rounded-lg border border-info/20 shadow p-3 md:p-4">
                <p class="text-xs text-info/70 uppercase tracking-wider font-semibold">
                    ğŸ“‹ {{ _('Sessions Status') }}
                </p>
                <p class="text-2xl sm:text-3xl font-bold mt-2 text-base-content/80">
                    <span class="text-warning">{{ sessions_open }}</span> / 
                    <span class="text-success">{{ sessions_closed }}</span>
                </p>
                <p class="text-xs text-base-content/60 mt-3">
                    ğŸ“‚ {{ _('Open') }} / {{ _('Closed') }}
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    function toggleMoreStats() {
        const moreStats = document.getElementById('more-stats');
        const icon = document.getElementById('toggle-icon');
        const text = document.getElementById('toggle-text');

        moreStats.classList.toggle('hidden');
        icon.classList.toggle('rotate-180');
        text.textContent = moreStats.classList.contains('hidden') ? '{{ _("More Details") }}' : '{{ _("Less Details") }}';
    }
</script>