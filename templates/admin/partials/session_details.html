<!-- File: templates/admin/partials/session_details.html -->
{% if sessions %}
<div class="space-y-3">
    <!-- Sessions Table -->
    <div class="bg-gradient-to-br from-info/5 to-base-100 border border-info/20 rounded-lg overflow-hidden shadow-sm transition-all duration-200">
        <div class="overflow-x-auto">
            <table class="table table-xs w-full border-collapse">
                <thead>
                    <tr class="bg-info/10 border-b-2 border-info/20">
                        <th class="text-[10px] font-bold uppercase tracking-wider border-r border-info/10 text-info">{{ _('Session #') }}</th>
                        <th class="text-[10px] font-bold uppercase tracking-wider border-r border-info/10 text-info">{{ _('Cashier') }}</th>
                        <th class="text-[10px] font-bold uppercase tracking-wider border-r border-info/10 text-info">{{ _('Time') }}</th>
                        <th class="text-[10px] font-bold uppercase tracking-wider text-right border-r border-info/10 text-info">{{ _('Cash') }}</th>
                        <th class="text-[10px] font-bold uppercase tracking-wider text-right border-r border-info/10 text-info">{{ _('Card') }}</th>
                        <th class="text-[10px] font-bold uppercase tracking-wider text-right border-r border-info/10 text-info">{{ _('Credit') }}</th>
                        <th class="text-[10px] font-bold uppercase tracking-wider text-right border-r border-info/10 text-info">{{ _('Total') }}</th>
                        <th class="text-[10px] font-bold uppercase tracking-wider text-center text-info">{{ _('Status') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in sessions %}
                    <tr class="hover:bg-info/10 transition-all duration-200 border-b border-base-content/5 group">
                        <td class="font-mono text-xs font-semibold border-r border-info/10">
                            <a href="/sessions/{{ item.session.id }}" class="inline-flex items-center gap-1.5 px-2 py-1 rounded-md bg-info/10 hover:bg-info/20 text-info hover:text-info-focus font-semibold transition-all duration-200 hover:scale-105 hover:shadow-md border border-info/30 hover:border-info/50 focus:outline-none focus:ring-2 focus:ring-info/50 cursor-pointer">
                                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                                #{{ item.session.session_number }}
                            </a>
                        </td>
                        <td class="text-xs border-r border-info/10">
                            {% if item.session.cashier %}
                                <span class="font-medium">{{ item.session.cashier.display_name }}</span>
                            {% else %}
                                <span class="text-base-content/40 italic">{{ _('Unknown') }}</span>
                            {% endif %}
                        </td>
                        <td class="text-xs font-mono border-r border-info/10">
                            {% if item.session.status == 'OPEN' %}
                                <div class="flex items-center gap-1.5">
                                    <svg class="w-3 h-3 text-success animate-pulse" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <circle cx="10" cy="10" r="5"/>
                                    </svg>
                                    <span class="text-base-content/60">{{ item.session.opened_at.strftime('%H:%M') }}</span>
                                </div>
                            {% else %}
                                <span class="text-base-content/70">{{ item.session.opened_at.strftime('%H:%M') }} - {{ item.session.closed_at.strftime('%H:%M') if item.session.closed_at else '?' }}</span>
                            {% endif %}
                        </td>
                        <td class="text-right font-mono tabular-nums text-xs border-r border-info/10">
                            {% if item.session.status == 'CLOSED' %}
                                <span class="font-medium text-base-content">{{ "{:,.0f}".format(item.cash_sales) }}</span>
                            {% else %}
                                <span class="text-base-content/40">-</span>
                            {% endif %}
                        </td>
                        <td class="text-right font-mono tabular-nums text-xs border-r border-info/10">
                            {% if item.session.status == 'CLOSED' %}
                                <span class="font-medium text-base-content">{{ "{:,.0f}".format(item.card_sales) }}</span>
                            {% else %}
                                <span class="text-base-content/40">-</span>
                            {% endif %}
                        </td>
                        <td class="text-right font-mono tabular-nums text-xs border-r border-info/10">
                            {% if item.session.status == 'CLOSED' %}
                                <span class="font-medium text-base-content">{{ "{:,.0f}".format(item.credit_sales) }}</span>
                            {% else %}
                                <span class="text-base-content/40">-</span>
                            {% endif %}
                        </td>
                        <td class="text-right font-mono tabular-nums text-xs font-semibold border-r border-info/10">
                            {% if item.session.status == 'CLOSED' %}
                                <span class="text-base-content">{{ "{:,.0f}".format(item.total_sales) }}</span>
                            {% else %}
                                <span class="text-base-content/40">-</span>
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {% if item.session.status == 'OPEN' %}
                                <span class="badge badge-success badge-xs gap-1 transition-all hover:scale-105">
                                    <svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <circle cx="10" cy="10" r="5"/>
                                    </svg>
                                    {{ _('Open') }}
                                </span>
                            {% elif item.session.flagged %}
                                <span class="badge badge-warning badge-xs gap-1 transition-all hover:scale-105">
                                    <svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ _('Flagged') }}
                                </span>
                            {% else %}
                                <span class="badge badge-ghost badge-xs">
                                    {{ _('Closed') }}
                                </span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Totals Card -->
    <div class="bg-gradient-to-br from-success/10 to-base-100 border-2 border-success/30 rounded-lg shadow-sm p-4 transition-all duration-200 hover:shadow-md">
        <div class="flex items-center justify-between gap-4 flex-wrap">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-success/20 flex items-center justify-center flex-shrink-0">
                    <svg class="w-4 h-4 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                    </svg>
                </div>
                <span class="text-xs font-bold uppercase tracking-wider text-success">{{ _('Total System') }}</span>
            </div>
            <div class="flex items-center gap-4 flex-wrap">
                {% set total_cash = sessions | sum(attribute='cash_sales') %}
                {% set total_card = sessions | sum(attribute='card_sales') %}
                {% set total_credit = sessions | sum(attribute='credit_sales') %}
                {% set grand_total = total_cash + total_card + total_credit %}
                
                <div class="flex items-center gap-1.5">
                    <span class="text-[10px] font-semibold uppercase tracking-wider text-base-content/60">{{ _('Cash') }}:</span>
                    <span class="text-sm font-mono font-bold text-base-content tabular-nums">{{ "{:,.0f}".format(total_cash) }}</span>
                </div>
                <div class="flex items-center gap-1.5">
                    <span class="text-[10px] font-semibold uppercase tracking-wider text-base-content/60">{{ _('Card') }}:</span>
                    <span class="text-sm font-mono font-bold text-base-content tabular-nums">{{ "{:,.0f}".format(total_card) }}</span>
                </div>
                <div class="flex items-center gap-1.5">
                    <span class="text-[10px] font-semibold uppercase tracking-wider text-base-content/60">{{ _('Credit') }}:</span>
                    <span class="text-sm font-mono font-bold text-base-content tabular-nums">{{ "{:,.0f}".format(total_credit) }}</span>
                </div>
                <div class="h-6 w-px bg-success/30 hidden sm:block"></div>
                <div class="flex items-center gap-1.5">
                    <span class="text-xs font-bold uppercase tracking-wider text-success">{{ _('Total') }}:</span>
                    <span class="text-xl font-mono font-bold text-success tabular-nums">{{ "{:,.0f}".format(grand_total) }}</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="bg-base-200/50 border border-dashed border-base-300 rounded-lg p-8 text-center transition-all duration-200 hover:bg-base-200/70">
    <svg class="w-12 h-12 mx-auto text-base-content/30 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
    </svg>
    <p class="text-sm text-base-content/60 font-medium">{{ _('No sessions found for this date') }}</p>
    <p class="text-xs text-base-content/40 mt-1">{{ _('Sessions will appear here once created') }}</p>
</div>
{% endif %}
