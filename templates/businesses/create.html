{% extends "base.html" %}

{% block title %}{{ _('New Business') }} - CashPilot{% endblock %}

{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Form -->
    <div class="lg:col-span-2">
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">{{ _('Create New Business') }}</h2>

                <form method="POST" action="/businesses" class="space-y-4" onsubmit="document.getElementById('create-loading').classList.remove('hidden');">
                    <!-- Name -->
                    <div class="form-control">
                        <label class="label pb-2">
                            <span class="label-text text-xs font-bold uppercase tracking-wider text-base-content/70">{{ _('Name') }} *</span>
                        </label>
                        <input 
                            type="text" 
                            name="name" 
                            id="name"
                            class="input input-sm input-bordered w-full focus:ring-2 focus:ring-primary/20 transition-all"
                            placeholder="{{ _('e.g., Farmacia Central') }}"
                            required
                            minlength="1"
                            maxlength="200"
                            pattern="[a-zA-Z0-9\sáéíóúñÁÉÍÓÚÑ.,\-]+"
                            title="{{ _('Only letters, numbers, spaces, and basic punctuation allowed') }}"
                            aria-describedby="name-help"
                        />
                        <label class="label pt-2" id="name-help">
                            <span class="label-text-alt text-xs text-base-content/60">{{ _('Pharmacy location name') }}</span>
                        </label>
                    </div>

                    <!-- Address -->
                    <div class="form-control">
                        <label class="label pb-2">
                            <span class="label-text text-xs font-bold uppercase tracking-wider text-base-content/70">{{ _('Address') }}</span>
                        </label>
                        <input 
                            type="text" 
                            name="address" 
                            id="address"
                            class="input input-sm input-bordered w-full focus:ring-2 focus:ring-primary/20 transition-all"
                            placeholder="{{ _('e.g., Av. España 123') }}"
                            maxlength="500"
                            aria-describedby="address-help"
                        />
                        <label class="label pt-2" id="address-help">
                            <span class="label-text-alt text-xs text-base-content/60">{{ _('Optional: Street address') }}</span>
                        </label>
                    </div>

                    <!-- Phone -->
                    <div class="form-control">
                        <label class="label pb-2">
                            <span class="label-text text-xs font-bold uppercase tracking-wider text-base-content/70">{{ _('Phone') }}</span>
                        </label>
                        <input 
                            type="tel" 
                            name="phone" 
                            id="phone"
                            class="input input-sm input-bordered w-full focus:ring-2 focus:ring-primary/20 transition-all"
                            placeholder="{{ _('+595 21 123456') }}"
                            maxlength="50"
                            pattern="[0-9\s+\-()]+"
                            title="{{ _('Only digits, spaces, +, -, (, ) allowed') }}"
                            aria-describedby="phone-help"
                        />
                        <label class="label pt-2" id="phone-help">
                            <span class="label-text-alt text-xs text-base-content/60">{{ _('Optional: Contact phone number') }}</span>
                        </label>
                    </div>

                    <!-- Buttons -->
                    <div class="flex gap-3 pt-4">
                        <button 
                            type="submit" 
                            class="btn btn-primary btn-sm flex-[2] gap-2 shadow-sm transition-all hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-primary/50"
                            aria-label="{{ _('Create new business') }}"
                        >
                            <span class="loading loading-spinner loading-sm hidden" id="create-loading"></span>
                            {{ _('Create Business') }}
                        </button>
                        <a 
                            href="/businesses" 
                            class="btn btn-outline btn-sm flex-1 transition-all hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-base-content/20"
                            aria-label="{{ _('Cancel and return to businesses list') }}"
                        >
                            {{ _('Cancel') }}
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Help -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h3 class="card-title text-lg">{{ _('Quick Guide') }}</h3>
            <div class="space-y-3 text-sm">
                <div>
                    <p class="font-semibold">{{ _('Name') }}:</p>
                    <p>{{ _('Pharmacy location name') }}</p>
                </div>
                <div>
                    <p class="font-semibold">{{ _('Address & Phone') }}:</p>
                    <p>{{ _('Optional: for reference only') }}</p>
                </div>
                <div>
                    <p class="font-semibold">{{ _('Cashiers') }}:</p>
                    <p>{{ _('Add cashier names after creation') }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}